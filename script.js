import{createClient as e}from"https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";let SUPABASE_URL="https://difipsrqfnclvokslnmd.supabase.co",SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpZmlwc3JxZm5jbHZva3Nsbm1kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI4NTExMzEsImV4cCI6MjA2ODQyNzEzMX0.tc5oYxQtiD3uhKo_o75HnVET09hNa8yBbNBbX5FcJqo",supabase=e("https://difipsrqfnclvokslnmd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRpZmlwc3JxZm5jbHZva3Nsbm1kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI4NTExMzEsImV4cCI6MjA2ODQyNzEzMX0.tc5oYxQtiD3uhKo_o75HnVET09hNa8yBbNBbX5FcJqo"),projectsData=[{title:"Website PPDB & Informasi MTsN 5 Merangin",description:"sistem manajemen website yang dikembangkan untuk MTsN 5 Merangin, sebuah Madrasah Tsanawiyah. Dibangun dengan PHP Native dan didukung oleh database MySQL/MariaDB, serta menggunakan Tailwind CSS, Chart.js, dan Font Awesome untuk antarmuka dan fungsionalitas. Website ini berfungsi sebagai portal informasi resmi madrasah dan sistem Penerimaan Peserta Didik Baru (PPDB) online. Fitur utamanya mencakup halaman beranda interaktif, informasi profil dan fasilitas madrasah, galeri foto, sistem pendaftaran siswa baru daring lengkap dengan unggah dokumen, fitur cek status pendaftaran, dan cetak bukti pendaftaran. Selain itu, terdapat panel admin yang komprehensif untuk mengelola data pendaftar, memverifikasi dokumen, memperbarui status pendaftaran, serta mengelola konten dinamis website seperti banner, pengumuman, dan galeri,",image:"assets/img/ppdb.png",link:"https://mts5mrg.free.nf/",technologies:["PHP","MySQL","Tailwind ","css","JavaScript"],features:["Halaman Beranda Interaktif","Informasi Lengkap Madrasah","Pendaftaran PPDB Online","Cek Status Pendaftaran","Manajemen Pengguna Admin"]},{title:"My QR Absensi",description:"Sistem Absensi Siswa Berbasis QR Code adalah aplikasi berbasis web yang dirancang untuk memudahkan proses pencatatan kehadiran siswa secara otomatis dan real-time menggunakan teknologi QR Code. Sistem ini dilengkapi fitur login guru/admin, rekapitulasi kehadiran, pencetakan laporan PDF, dan manajemen data siswa, kelas, serta hari libur..",image:"assets/img/qr.jpg",link:"",technologies:["PHP ","dompdf","JavaScript","qr-scanner","ZipArchive "],features:[" Absensi Siswa via QR Code","Login Multi-Role (Admin & Guru)","Rekap Absensi","Cetak & Unduh QR Code Massal","Manajemen Data Siswa","Pengelolaan Hari Libur","Laporan Absensi Format PDF","Pencarian & Filter Data"]},{title:"Integrasi Api AI",description:"AiLinx.id adalah asisten cerdas berbasis web yang dirancang untuk membantu pengguna memperoleh informasi secara ringkas, mendalam, dan mudah dipahami. Aplikasi ini memungkinkan pengguna untuk menyesuaikan jenis output informasi yang diinginkan, seperti Arti Singkat, Penjelasan Detail, Penjelasan Awam, Istilah Terkait, Penjelasan sebagai Dosen, Contoh, dan Pandangan Menurut Para Ahli...",image:"assets/img/ailink.webp",link:"https://ailink-plum.vercel.app/",technologies:["HTML5 + CSS3 ","Tailwind","JavaScript","LottieFiles"],features:["Desain Responsif","pilihan Output yang Dapat Disesuaikan","Mode Tema (Dark/Light)"]},],typingTextElement=document.getElementById("typing-text"),phrases=["Information Systems Student","Technology Enthusiast","Web Developer","Website Enthusiast","Tech Lover"],phraseIndex=0,charIndex=0,isDeleting=!1;function typeEffect(){let e=phrases[phraseIndex],t="";t=isDeleting?e.substring(0,charIndex-1):e.substring(0,charIndex+1),typingTextElement.textContent=t;let a=150;isDeleting&&(a/=2),isDeleting||charIndex!==e.length?isDeleting&&0===charIndex&&(isDeleting=!1,phraseIndex=(phraseIndex+1)%phrases.length):(a=1500,isDeleting=!0),isDeleting?charIndex--:charIndex++,setTimeout(typeEffect,a)}function renderProjects(){let e=document.getElementById("projects-content");e.innerHTML="",projectsData.forEach(t=>{let a=`
      <div class="bg-white/5 backdrop-blur-sm border border-purple-500/10 rounded-lg shadow-xl overflow-hidden transform hover:scale-105 transition duration-300 ease-in-out" data-project-title="${t.title}" data-project-description="${t.description}" data-project-image="${t.image}" data-project-link="${t.link}" data-project-technologies="${t.technologies.join(", ")}" data-project-features="${t.features.join(", ")}" data-aos="fade-up" data-aos-duration="1000">
        <img src="${t.image}" alt="${t.title}" class="w-full h-48 object-cover" />
        <div class="p-6">
          <h3 class="text-xl font-semibold bg-gradient-to-r from-[#6366f1] to-[#a855f7] bg-clip-text text-transparent mb-3 whitespace-nowrap overflow-hidden text-ellipsis">
            ${t.title}
          </h3>
          <p class="text-gray-300 mb-4 line-clamp-3">
            ${t.description}
          </p>
          <div class="flex flex-col gap-2 mt-4">
            <a href="${t.link}" data-link="${t.link}" target="_blank" rel="noopener noreferrer" class="project-link bg-gradient-to-r from-[#6366f1] to-[#a855f7] text-white px-4 py-2 rounded-md text-sm font-semibold hover:from-[#7c3aed] hover:to-[#9333ea] transition duration-300 flex items-center justify-center w-full">
              Kunjungi <i class="fas fa-external-link-alt ml-2 text-xs"></i>
            </a>
            <a href="#" class="detail-gradient-border-button text-sm font-semibold transition duration-300 flex items-center justify-center w-full py-2 rounded-md">
              <span class="bg-gradient-to-r from-[#6366f1] to-[#a855f7] bg-clip-text text-transparent">
                Detail <i class="fas fa-arrow-right ml-1 text-xs"></i>
              </span>
            </a>
          </div>
        </div>
      </div>
    `;e.insertAdjacentHTML("beforeend",a)})}function initializeProjectLinks(){let e=document.querySelectorAll(".project-link");e.forEach(e=>{let t=e.dataset.link;t&&""!==t.trim()?(e.href=t,e.classList.remove("bg-gray-700","text-gray-400","cursor-not-allowed"),e.classList.add("bg-gradient-to-r","from-[#6366f1]","to-[#a855f7]","text-white","hover:from-[#7c3aed]","hover:to-[#9333ea]"),e.innerHTML='Kunjungi <i class="fas fa-external-link-alt ml-2 text-xs"></i>',e.removeEventListener("click",function(e){e.preventDefault()})):(e.href="#",e.classList.add("bg-gray-700","text-gray-400","cursor-not-allowed"),e.classList.remove("bg-gradient-to-r","from-[#6366f1]","to-[#a855f7]","hover:from-[#7c3aed]","hover:to-[#9333ea]","text-white"),e.innerHTML="Demo Tidak Tersedia",e.addEventListener("click",function(e){e.preventDefault()}))})}window.onload=function(){typeEffect(),initializeDynamicBlobs(),renderProjects(),initializeProjectLinks(),initializeDetailButtons(),AOS.init({once:!1,mirror:!0})},document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),document.querySelector(this.getAttribute("href")).scrollIntoView({behavior:"smooth"}),mobileMenu.classList.contains("max-h-screen")&&(mobileMenu.classList.remove("max-h-screen","opacity-100"),mobileMenu.classList.add("max-h-0","opacity-0"),menuIcon.classList.remove("fa-times"),menuIcon.classList.add("fa-bars"))})});let mobileMenuButton=document.getElementById("mobile-menu-button"),mobileMenu=document.getElementById("mobile-menu"),menuIcon=document.getElementById("menu-icon"),navbar=document.getElementById("navbar");mobileMenuButton.addEventListener("click",()=>{mobileMenu.classList.toggle("max-h-0"),mobileMenu.classList.toggle("opacity-0"),mobileMenu.classList.toggle("max-h-screen"),mobileMenu.classList.toggle("opacity-100"),menuIcon.classList.toggle("fa-bars"),menuIcon.classList.toggle("fa-times"),mobileMenu.classList.contains("max-h-screen")?(navbar.classList.remove("bg-transparent","bg-[#030014]/50","backdrop-blur-xl"),navbar.classList.add("bg-[#030014]")):window.scrollY>50?navbar.classList.add("bg-[#030014]/50","backdrop-blur-xl"):navbar.classList.add("bg-transparent")}),window.addEventListener("scroll",()=>{mobileMenu.classList.contains("max-h-0")&&(window.scrollY>50?(navbar.classList.remove("bg-transparent"),navbar.classList.add("bg-[#030014]/50","backdrop-blur-xl","shadow-lg")):(navbar.classList.remove("bg-[#030014]/50","backdrop-blur-xl","shadow-lg"),navbar.classList.add("bg-transparent")))});let tabButtons=document.querySelectorAll(".tab-button"),tabContents=document.querySelectorAll(".tab-content");document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector('.tab-button[data-tab="projects"]'),t=document.getElementById("projects-content");e&&t&&(tabButtons.forEach(e=>e.classList.remove("active")),tabContents.forEach(e=>e.classList.add("hidden")),e.classList.add("active"),t.classList.remove("hidden"),AOS.refresh())}),tabButtons.forEach(e=>{e.addEventListener("click",()=>{tabButtons.forEach(e=>e.classList.remove("active")),e.classList.add("active"),tabContents.forEach(e=>e.classList.add("hidden"));let t=e.dataset.tab;document.getElementById(`${t}-content`).classList.remove("hidden"),AOS.refresh()})});let scrollPosition=0;function initializeDetailButtons(){let e=document.querySelectorAll(".detail-gradient-border-button"),t=document.getElementById("project-modal"),a=document.getElementById("modal-close-button"),i=document.getElementById("modal-image"),n=document.getElementById("modal-title"),s=document.getElementById("modal-description"),o=document.getElementById("modal-tech-count"),l=document.getElementById("modal-feature-count"),r=document.getElementById("modal-technologies"),d=document.getElementById("modal-features"),c=document.getElementById("modal-live-demo-button"),m=document.getElementById("modal-content-wrapper"),g=document.getElementById("current-project-breadcrumb");e.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let a=this.closest(".bg-white\\/5");if(a){let p=a.dataset.projectTitle,u=a.dataset.projectDescription,b=a.dataset.projectImage,f=a.dataset.projectLink,h=a.dataset.projectTechnologies?a.dataset.projectTechnologies.split(",").map(e=>e.trim()):[],y=a.dataset.projectFeatures?a.dataset.projectFeatures.split(",").map(e=>e.trim()):[];i.src=b,n.textContent=p,s.textContent=u,o.textContent=h.length,l.textContent=y.length,r.innerHTML="",h.length>0?h.forEach(e=>{let t=document.createElement("li");t.classList.add("modal-tech-item"),t.innerHTML=`<i class="fas fa-microchip text-indigo-400"></i><span>${e}</span>`,r.appendChild(t)}):r.innerHTML='<li class="text-gray-300">Tidak ada teknologi yang terdaftar.</li>',d.innerHTML="",y.length>0?y.forEach(e=>{let t=document.createElement("li");t.textContent=e,d.appendChild(t)}):d.innerHTML='<li class="text-gray-300">Tidak ada fitur utama yang terdaftar.</li>',f&&""!==f.trim()?(console.log("Setting Live Demo data-link to:",f),c.dataset.link=f,c.classList.remove("hidden"),c.classList.remove("cursor-not-allowed","bg-gray-700","text-gray-400"),c.classList.add("bg-gradient-to-r","from-[#6366f1]","to-[#a855f7]","text-white","hover:from-[#7c3aed]","hover:to-[#9333ea]")):(console.log("Live Demo link is empty or invalid for this project. Hiding button."),c.classList.add("hidden")),g.textContent=p,scrollPosition=window.scrollY,t.classList.remove("hidden"),document.body.classList.add("overflow-hidden"),document.documentElement.classList.add("overflow-hidden"),document.body.style.position="fixed",document.body.style.top=`-${scrollPosition}px`,document.body.style.width="100%",t.classList.add("modal-enter-active"),setTimeout(()=>{m.classList.remove("scale-95","opacity-0"),m.classList.add("scale-100","opacity-100")},10)}})}),a.addEventListener("click",()=>{t.classList.add("modal-exit-active"),m.classList.remove("scale-100","opacity-100"),m.classList.add("scale-95","opacity-0"),setTimeout(()=>{t.classList.add("hidden"),t.classList.remove("modal-enter-active","modal-exit-active"),document.body.classList.remove("overflow-hidden"),document.documentElement.classList.remove("overflow-hidden"),document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,scrollPosition)},300)}),t.addEventListener("click",function(e){e.target===t&&(t.classList.add("modal-exit-active"),m.classList.remove("scale-100","opacity-100"),m.classList.add("scale-95","opacity-0"),setTimeout(()=>{t.classList.add("hidden"),t.classList.remove("modal-enter-active","modal-exit-active"),document.body.classList.remove("overflow-hidden"),document.documentElement.classList.remove("overflow-hidden"),document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,scrollPosition)},300))}),c&&c.addEventListener("click",function(){let e=this.dataset.link;e&&""!==e.trim()?window.open(e,"_blank","noopener,noreferrer"):console.warn("Live Demo link is not available for this project.")})}let sections=document.querySelectorAll("section[id]"),navLinks=document.querySelectorAll('nav a[href^="#"]'),observer=new IntersectionObserver(e=>{e.forEach(e=>{let t=e.target.id,a;(a="hero"===t?document.querySelector('nav a[href="#hero"].nav-link'):document.querySelector(`nav a[href="#${t}"]`))&&(e.isIntersecting?(navLinks.forEach(e=>{("#hero"!==e.getAttribute("href")||e.classList.contains("nav-link"))&&(e.classList.remove("nav-link-active"),e.classList.add("nav-link-inactive"))}),a.classList.remove("nav-link-inactive"),a.classList.add("nav-link-active")):(a.classList.remove("nav-link-active"),a.classList.add("nav-link-inactive")))})},{rootMargin:"-64px 0px -70% 0px"});sections.forEach(e=>{observer.observe(e)});let dynamicBlobContainer=document.getElementById("dynamic-blob-container"),blobs=[],initialBlobConfigs=[{id:"blob1",x:-4,y:0,size:400},{id:"blob2",x:80,y:100,size:300},{id:"blob3",x:20,y:-8,size:500},{id:"blob4",x:-50,y:200,size:350},{id:"blob5",x:120,y:-150,size:450},];function initializeDynamicBlobs(){initialBlobConfigs.forEach((e,t)=>{let a=document.createElement("div");a.id=e.id,a.classList.add("dynamic-blob"),a.style.width=`${e.size}px`,a.style.height=`${e.size}px`,a.style.left=`${e.x}%`,a.style.top=`${e.y}%`,dynamicBlobContainer.appendChild(a),blobs.push({element:a,initialX:e.x,initialY:e.y,index:t})}),updateBlobsPosition()}function updateBlobsPosition(){let e=window.pageYOffset;blobs.forEach(t=>{let a=40*Math.sin(e/100+.5*t.index),i=30*Math.cos(e/100+.5*t.index);t.element.style.transform=`translate(${a}px, ${i}px)`})}window.addEventListener("scroll",updateBlobsPosition);let aboutMeImageContainer=document.getElementById("about-me-image-container"),aboutMeImage=document.getElementById("about-me-image");aboutMeImageContainer&&aboutMeImage&&aboutMeImageContainer.addEventListener("click",()=>{let e=aboutMeImage.src,t=aboutMeImage.dataset.originalSrc,a=aboutMeImage.dataset.hoverSrc;e.includes(t)?aboutMeImage.src=a:aboutMeImage.src=t});let commentForm=document.getElementById("commentForm"),commentsList=document.getElementById("commentsList"),loadingIndicator=document.getElementById("loadingIndicator"),errorMessage=document.getElementById("errorMessage"),noCommentsMessage=document.getElementById("noCommentsMessage"),loadingComments=document.getElementById("loadingComments"),profilePicFile=document.getElementById("profilePicFile"),profilePicPreview=document.getElementById("profilePicPreview");function formatTimeAgo(e){let t=new Date(e),a=new Date,i=Math.floor((a-t)/1e3),n=i/31536e3;return n>1?Math.floor(n)+" tahun yang lalu":(n=i/2592e3)>1?Math.floor(n)+" bulan yang lalu":(n=i/86400)>1?Math.floor(n)+" hari yang lalu":(n=i/3600)>1?Math.floor(n)+" jam yang lalu":(n=i/60)>1?Math.floor(n)+" menit yang lalu":Math.floor(i)+" detik yang lalu"}async function fetchComments(){loadingComments.style.display="block",errorMessage.style.display="none";let e=document.getElementById("commentsList");for(;e.children.length>1;)e.removeChild(e.lastChild);try{let{data:t,error:a}=await supabase.from("comments").select("*").order("created_at",{ascending:!1});if(a)throw a;loadingComments.style.display="none";let i=document.getElementById("comment-count");i&&(i.textContent=`(${t.length})`),0===t.length?noCommentsMessage.style.display="block":(noCommentsMessage.style.display="none",t.forEach(t=>{let a=document.createElement("div");a.className="comment-card";let i=t.profile_pic_url,n=t.author?t.author.charAt(0).toUpperCase():"?";a.innerHTML=`
                          <div class="comment-avatar-wrapper">
                              ${i?`<img src="${i}" alt="Foto Profil" class="comment-avatar-img" onerror="this.onerror=null;this.src='https://placehold.co/40x40/cccccc/ffffff?text=User';">`:`<div class="comment-avatar-initial">${n}</div>`}
                          </div>
                          <div class="comment-content-wrapper">
                              <div class="comment-header">
                                  <div class="comment-author">${t.author}</div>
                                  <div class="comment-date">${formatTimeAgo(t.created_at)}</div>
                              </div>
                              <div class="comment-content">${t.content}</div>
                          </div>
                      `,e.appendChild(a)}))}catch(n){console.error("Error fetching comments:",n.message),errorMessage.textContent="Gagal memuat komentar: "+n.message,errorMessage.style.display="block",loadingComments.style.display="none"}}profilePicFile.addEventListener("change",function(){let e=this.files[0];if(e){let t=new FileReader;t.onload=function(e){profilePicPreview.src=e.target.result,profilePicPreview.classList.remove("hidden")},t.readAsDataURL(e)}else profilePicPreview.src="#",profilePicPreview.classList.add("hidden")}),commentForm.addEventListener("submit",async e=>{e.preventDefault(),loadingIndicator.style.display="block",errorMessage.style.display="none";let t=document.getElementById("author").value,a=document.getElementById("content").value,i=profilePicFile.files[0],n="";try{if(i){let s=`${Date.now()}-${i.name}`,o=`public/${s}`,{data:l,error:r}=await supabase.storage.from("profile_pictures").upload(o,i,{cacheControl:"3600",upsert:!1});if(r)throw l;let{data:d}=supabase.storage.from("profile_pictures").getPublicUrl(o);n=d.publicUrl}let{data:c,error:m}=await supabase.from("comments").insert([{author:t,content:a,profile_pic_url:n},]);if(m)throw m;commentForm.reset(),profilePicPreview.src="#",profilePicPreview.classList.add("hidden"),await fetchComments()}catch(g){console.error("Error adding comment:",g.message),errorMessage.textContent="Gagal menambahkan komentar: "+g.message,errorMessage.style.display="block"}finally{loadingIndicator.style.display="none"}}),window.addEventListener("load",()=>{fetchComments()});
